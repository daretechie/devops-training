
# ===== Execution Flow =====
activate_infra_environment "$ENVIRONMENT"
check_aws_cli
check_aws_profile
create_ec2_instances
create_s3_buckets

echo "🎯 Provisioning complete."
```

📷 *\[Screenshot: AWS CLI configure output]*
📷 *\[Screenshot: Terminal run of script]*
📷 *\[Screenshot: AWS EC2 dashboard with instances]*
📷 *\[Screenshot: AWS S3 dashboard with created buckets]*

---

## 🛠️ Troubleshooting

| Issue                          | Cause                      | Fix                                      |
| ------------------------------ | -------------------------- | ---------------------------------------- |
| `InvalidKeyPair.NotFound`      | Key pair missing in region | Create via AWS Console → EC2 → Key Pairs |
| `BucketAlreadyExists`          | Name conflict              | Script uses timestamp to avoid clashes   |
| `Unable to locate credentials` | AWS CLI not configured     | Run `aws configure`                      |
| `AccessDenied`                 | IAM permissions missing    | Add EC2 & S3 permissions to IAM user     |
| `command not found: aws`       | AWS CLI not installed      | Install with package manager             |

---

## 💡 Key Concepts

* **Functions** – Reusable blocks of commands for EC2 and S3 creation.
* **Arrays** – Store department names for bulk bucket creation.
* **Dynamic Parameters** – AMI ID, region, key pair, and instance count passed via script arguments.
* **\$?** – Exit status check to confirm command success.
* **Retries** – Attempt bucket creation again if initial try fails.

---


